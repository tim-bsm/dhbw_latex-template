% !TEX root = ../../document/document.tex
% LTeX: enabled=false


%%%%%%%%%% Create new save command %%%%%%%%%%

\makeatletter

% \savepdf[<OPTIONAL>]{<ID>}{<pages>}{<description>}{<file_name>}

% OPTIONAL: add any special settings (see https://texdoc.org/serve/graphicx.pdf/0) -> e.g.: width=0.7\textheight,angle=90,origin=c
% ID: not used ID to reference
% pages: enter all pages e.g. 1,2,3,4 or 1,...,4 (PDF pages) -> see: https://tikz.dev/pgffor
% description: heading to show in the list of images/tables
% file_name: in the folder /content/non_tex_files/pdfs
\newcommand\savepdf[5][]{%
    \@namedef{pdf@#2}{
        % Iterate over every page that should be used and
        % add it as single figure.
        % Create counter to change caption based on the iteration
        \foreach \pdfpage [count=\pdfit] in {#3} {
            \begin{figure}[!ht]
                \centering
                \includegraphics[
                    page={\pdfpage},
                    width={\textwidth},% default width (can be overwritten by setting another width in #1)
                    #1
                ]{../pdfs/#5}
                
                % Only place real caption with label on first page
                \ifthenelse{\equal{\pdfit}{1}}% use iteration number to get first iteration
                    {% true
                        \caption{#4}
                        \label{pdf:#2}
                    }
                    {% false
                        \caption*{\autoref{pdf:#2}-\pdfit: #4}
                    }
            \end{figure}
        }
    }
}

% \usepdf{<ID>}
\newcommand\usepdf[1]{%
    \@nameuse{pdf@#1}
}

\makeatother


%%%%%%%%%% Content %%%%%%%%%%

\input{../content/additionals/pdfs.tex}
